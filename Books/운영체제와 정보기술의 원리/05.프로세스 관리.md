# 프로세스 관리

## 프로세스의 개념
**프로세스**란 실행중인 프로그램을 의미함.
디스크에 실행파일 형태로 존재하던 프로그램이 메모리에 올라가서 실행되기 시작하면 프로세스가 되며, 프로세스는 CPU를 획득하여 코드를 수행하거나 CPU를 반환하고 입출력 작업을 수행하기도 한다.

**프로세스 문맥**이란 프로세스가 현재 어떤 상태에서 수행되고 있는지 규명하기 위해 필요한 정보를 의미한다.
프로세스 문맥은 프로세스의 주소 공간을 비롯해 커널에서 수행한 일의 상태, 그 프로세스에 관해 커널이 관리하는 각종 정보들을 포함하고 있다.

프로세스 문맥은 크게 세 가지로 나뉜다.
- **하드웨어 문맥**
  - CPU의 수행 상태를 나타내는 것으로 프로그램 카운터값과 각종 레지스터에 저장하고 있는 값
- **프로세스의 주소 공간**
  - 코드, 데이터, 스택으로 구성되는 프로세스 자신만의 독자적인 주소 공간
  - 프로세스의 문맥을 결정짓는 중요한 요소
- **커널상의 문맥**
  
## 프로세스의 상태
프로세스의 상태는 **실행**, **준비**, **봉쇄** 세 가지로 구분할 수 있다.
- **실행**
  - 프로세스가 CPU를 보유하고 명령을 실행하고 있는 상태
- **준비**
  - 프로세스가 CPU만 보유하면 당장 명령을 실행할 수 있지만 CPU를 할당받지 못한 상태
- **봉쇄**
  - 프로세스가 요청한 I/O 작업이 진행 중인 상태

이렇게 프로세스 상태를 구분짓는 이유는 컴퓨터의 자원을 효율적으로 관리하기 위해서이다.

이 밖에 프로세스가 생성 중이거나 종료 중인 일시적 상태를 각각 **시작**, **완료** 상태라고 부르기도 한다.
- **시작**
  - 프로세스가 시작되어 프로세스를 위한 각종 자료구조는 생성되었지만 아직 메모리 획득을 승인받지 못한 상태
- **완료**
  - 프로세스가 종료되었으나 운영체제가 아직 프로세스와 관련된 자료구조를 완전히 정리하지 못한 상태

하나의 프로세스는 위 상태들 중 하나에 머무르게 되고 시간이 지남에 따라 변한다.

프로세스 변경을 위해 프로세스 문맥을 저장하고 새로운 프로세스의 문맥을 세팅하는 과정을 **컨텍스트 스위칭**이라고 한다.

## 프로세스 제어블록(PCB)
프로세스 제어블록이란 운영체제가 시스템 내 프로세스들을 관리하기 위해 **프로세스마다 유지하는 정보들을 담는 커널 내 자료구조**이다.

PCB의 구성 요소는 다음과 같다.

- **프로세스의 상태**
  - CPU를 할당해도 되는지 여부 판단을 위해 필요
- **프로그램 카운터 값**
  - 다음에 수행할 명령어의 위치
- **CPU 레지스터 값**
  - CPU 연산을 위해 현 시점 레지스터에 어떤 값을 저장하고 있는지
- **CPU 스케쥴링 정보**
  - 스케쥴링을 위해 필요한 정보
- **메모리 관리 정보**
  - 메모리 할당을 위해 필요한 정보
- **자원 사용 정보**
  - 사용자에게 자원 사용 요금을 계산해 청구하는 등의 용도
- **입출력 상태 정보**
  - 프로세스가 오픈한 파일 정도 등 프로세스의 입출력 관련 상태 정보

## 문맥교환(Context Switch)
컨텍스트 스위치란 프로세스 간의 CPU 제어권이 이양되는 과정을 뜻한다. 