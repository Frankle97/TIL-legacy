# 운영체제 개요
## 운영체제의 정의

`운영체제`란 컴퓨터 하드웨어 바로 윗단에 설치되는 소프트웨어이다.

사용자 입장에서 하드웨어 자체를 다루는 것이 쉽지 않으므로, 운영체제의 도움으로 컴퓨터를 손쉽게 조작할 수가 있다.

운영체제 중 항상 필요한 부분을 메모리에 올려서 사용하는데, 이 부분을 `커널`이라고 부르며 좁은 의미의 운영체제라고도 부른다.

## 운영체제의 기능
운영체제의 **역할**은 `하드웨어를 위한 역할`과 `사용자를 위한 역할` 두 가지로 나누어볼 수 있다.

하드웨어 쪽에는 사용자가 직접 다루기 힘든 각종 하드웨어를 관리하는 역할을 하며, 사용자에게는 편리한 인터페이스를 제공하는 역할을 한다.

이는 곧 컴퓨터 시스템 내의 자원을 효율적으로 관리하고, 컴퓨터 시스템을 편리하게 사용할 수 있는 환경을 제공하는 것이다.

운영체제가 관리하는 자원의 효율성이 가장 큰 목표이지만, 형평성까지 고려해야 한다.

## 운영체제의 분류
근래의 운영체제들은 멀티 태스킹을 지원한다.

운영체제가 멀티 태스킹으로 작업을 처리할 땐, 여러 프로그램이 CPU와 메모리를 공유한다.
CPU는 오직 하나라서 프로그램은 매 순간 하나만 실행될 수 있다고 하더라도, 성능이 매우 뛰어나기 때문에 짧은 시간에 여러 프로그램들이 CPU 내에서 번갈아 실행되면 사용자 입장에선 하나씩 실행된다고 인식할 수 없고
여러 프로그램이 동시에 실행되는 것처럼 보인다.

이와 같이 CPU의 작업 시간을 여러 프로그램들끼리 조금씩 나누어 쓰는 시스템을 **시분할 시스템**이라고 한다.

CPU와 달리 메모리는 여러 프로그램들이 메모리의 공간을 보유하며 동시에 올라갈 수 있다.
이처럼 메모리 공간을 분할해 여럿 프로그램을 메모리에 올려놓고 처리하는 시스템을 **다중 프로그래밍 시스템**이라고 한다.

멀티태스킹 운영체제는 여러 프로그램을 같이 실행하지만, 사용자 관점에서는 각 프로그램에 대한 I/O 결과를 곧바로 확인할 수 있기에 이러한 시스템을 **대화형 시스템**이라고 한다.

멀티 태스킹, 시분할, 다중 프로그래밍, 대화형 시스템은 모두 여러 프로그램이 하나의 컴퓨터에서 동시에 실행된다.

이는 곧 각 프로그램이 사용자의 입력에 대해 곧바로 응답한다는 것과 유사한 의미로 볼 수 있다.

**실시간 운영체제**는 정해진 시간 내에 어떠한 일정이 반드시 처리됨을 보장하는 시스템에서 사용된다.

## 운영체제의 예
윈도우가 개인용 컴퓨터를 위한 운영체제로 누구든 손쉽게 사용할 수 있는 편리한 인터페이스와 각종 기능을 제공하는 장점을 갖는다면, 
유닉스는 전통을 지닌 운영체제로서 대형 컴퓨터 및 개발 등의 전문적인 목적으로 사용하기에 적합하다.

## 운영체제의 자원 관리 기능
운영체제의 가장 핵심적인 기능은 **자원을 효율적으로 관리**하는 것이며, 자원은 `하드웨어 자원`과 `소프트웨어 자원`으로 나뉜다.

### CPU
CPU 내에서 프로세스는 여러 개가 동시에 수행될 수 있고, 매 시점 어떠한 프로세스에 CPU을 할당해 작업을 처리할 것인지 결정해야 한다.
이러한 일을 **CPU 스케쥴링**이라고 하며, CPU 스케쥴링의 목표는 CPU를 효율적으로 사용하고, 프로세스가 불이익을 보지 않도록 하지 않는 것이다.
대표적인 CPU 스케쥴링 기법으로는 선입선출, 라운드 로빈, 우선순위 등이 있다.

- 선입선출
  - 먼저 들어온 프로세스부터 처리한다. => 싱글 태스킹이 아닌가
- 라운드 로빈
  - 매 프로세스를 일정한 시간으로 나누고, 지정한 시간이 넘어간다면 대기열의 마지막으로 넘긴다.
- 우선순위
  - CPU에 대기 중인 프로세스들에 우선순위를 부여하고 우선순위가 높은 프로세스부터 처리한다.

### 메모리
운영체제의 중요 관리 대상으로는 메모리도 포함된다.
메모리는 CPU가 직접 접근하는 컴퓨터 내부의 기억장치이다. 
프로그램이 CPU에서 실행되기 위해선 해당되는 부분이 메모리 위에 올라가 있어야 하며, 한정된 메모리 공간에 여러 프로그램을 수용하기 위해서는 메모리에 대한 효율적인 관리 매커니즘이 필요하다.
운영체제는 메모리의 어느 부분이 어떤 프로그램에 의해 사용되고 있는지 파악하여 유지하는데, 이러한 정보는 **메모리 주소**를 통해 관리한다.

운영체제는 프로그램에 메모리가 필요할 때 할당하고, 더 이상 사용되지 않으면 회수한다.
이처럼 운영체제는 **전체 메모리 공간이 효율적으로 사용**될 수 있도록 해야하며, **각 프로세스가 자신의 메모리 영역에만 접근**할 수 있도록 관리해야 한다.

물리적 메모리 관리 방식에는 **고정분할 방식**, **가변분할 방식**, **가상메모리 방식** 등이 있다.

고정분할 방식은 물리적 메모리를 몇 개의 분할로 미리 나누어 관리하고, 각 분할에는 하나의 프로그램이 적재될 수 있다.
이 방식은 메모리에 동시 적재되는 최대 프로그램의 수가 분할 개수로 한정되므로 융통성이 없다는 단점이 있다.
그뿐만 아니라 분할의 크기보다 큰 프로그램은 적재가 불가능하게 되므로 메모리의 효율적 사용 측면에서도 바람직하지 않다.

가변분할 방식은 매 시점 프로그램 크기에 맞게 메모리를 분할하여 사용하는 방식이다.
고정분할 방식과 같이 크기에 대한 문제로 발생하지는 않으나, 물리적 메모리 크기보다 큰 프로그램의 실행은 여전히 불가능하다.

**가상메모리 기법**은 현대 컴퓨터 환경에서 가장 보편적으로 사용되는 메모리 관리 기법이다.
이 기법은 물리적 메모리보다 큰 프로그램이 실행되는 것을 지원하며, 프로그램의 크기는 가상 메모리의 크기에 의해 결정된다.

모든 프로그램은 물리적 메모리와 독립적으로 0번지부터 시작하느 자신만의 가상 메모리 주소를 가지며 이 주소와 물리적 메모리 주소를 매핑하는 기술을 이용하여 주소를 변환시킨 후 프로그램의 물리적 메모리에 올리게 된다. 

가상메모리 기법에서는 물리적 메모리의 크기와 상관없이 메모리의 크기가 충분하다고 가정하여 개발할 수 있다.
원리는 현재 사용되는 부분만 메모리에 올리고, 나머지는 하드디스크와 같은 보조기억장치에 저장해두었다가 필요할 때 적재하는 방식을 취한다.
이 때 사용되는 보조장치의 영역을 **스왑 영역**이라고 부르며, 프로그램을 구성하는 가상 메모리 주소 공간은 **페이지**라는 동일한 크기의 작은 단위로 나누어 물리적 메모리와 스왑 영역에 일부분씩 저장된다.
이렇게 동일 단위로 메모리를 나누는 기법을 **페이징 기법**이라고 한다.

주변장치 및 입출력 장치는 CPU나 메모리와 달리 **인터럽트**라는 매커니즘을 통해 관리된다.
인터럽트란 CPU의 서비스가 필요한 경우에 발생시켜 서비스를 요청하는 신호를 말한다.

