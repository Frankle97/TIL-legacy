# DBMS 아키텍처 개요
사용자에게 전달받은 SQL 구문은 DBMS를 통해 다양한 처리를 수행한 뒤 저장 장치의 데이터에 접근해 데이터를 읽고 쓴다

## 쿼리 평가 엔진
- SQL 구문을 분석하고, 어떤 순서로 기억장치의 데이터에 접근할지를 결정
- 이때 결정되는 계획을 `실행 계획`이라고 부름
- 이러한 실행 계획에 기반을 둬서 데이터에 접근하는 방법을 `접근 메서드`라고 부름
- 즉, 쿼리 평가 엔진은 **계획을 세우고 실행하는 모듈**

## 버퍼 매니저
- DBMS는 버퍼라는 특별한 용도로 사용하는 **메모리 영역**을 확보
- 버퍼 매니저 메모리 영역을 관리
- 버퍼 매니저는 디스크 용량 매니저와 함께 연동되어 작동

## 디스크 용량 매니저
- 디스크 용량 매니저는 어디에 어떻게 데이터를 저장할지 관리하며, 데이터의 읽고 쓰기를 제어

## 트랜잭션 매니저와 락 매니저
- 트랜잭션의 정합성을 유지하면서 실행시키고, 필요한 경우 데이터에 락을 걸어 다른 사람의 요처을 대기시키는 역할

## 리커버리 매니저
- 장애에 대비해 데이터를 정기 백업하고, 문제 발생 시 복구하는 기능을 수행

# DBMS와 버퍼
메모리는 한정된 희소 자원이고, 데이터베이스가 메모리에 저장하고자 하는 데이터는 굉장히 많음

## DBMS와 기억장치의 관계
- DBMS는 데이터 저장 목적의 미들웨어이므로 기억장치와 떨어 뜨릴 수 없는 관계이다.
- DBMS가 사용하는 대표적인 기억장치는 **하드디스크**, **메모리**이다.

### 하드디스크(HDD)
- DBMS가 데이터를 저장하는 매체(저장소)는 대부분 하드디스크이다.
    - 하드디스크 외 많은 선택지가 있지만 용량, 비용, 성능 관점에서 대부분 하드디스크를 선택한다.
- DBMS는 항상 메모리에도 데이터를 보관한다.

### 메모리
- 메모리는 하드디스크에 비해 기억 비용이 굉장히 비싸다.
- 따라서 데이터베이스의 데이터를 전부 메모리에 올리는 것은 불가능하다.

### 버퍼를 활용한 속도 향상
- DBMS가 일부여도 데이터를 메모리에 올리는 이유는 **성능 향상** 때문이다.
    - 한마디로 SQL 구문의 실행 속도를 빠르게 만들기 위함이다.
- 자주 접근하는 데이터를 메모리에 올려둔다면, 같은 SQL 구문을 실행하더라도 디스크가 아닌 메모리에서 데이터를 읽어 빠르게 검색할 수 있다.
- **디스크 접근을 줄일 수 있다면 굉장히 큰 폭의 성능 향상**이 가능하다.
- 이렇게 성능 향상을 목적으로 데이터를 저장하는 메모리를 **버퍼** 또는 **캐시**라고 부른다.
- 버퍼는 완충제라는 의미이며, 사용자와 저장소 사이에서 SQL 구문의 디스크 접근을 줄여주는 역할을 하여 붙은 이름이다.
- 버퍼에 **데이터를 어떻게, 어느 저옫의 기간 동안 올릴지**를 관리하는 것이 DBMS의 **버퍼 매니저**이다.


## 메모리 위에 있는 두 개의 버퍼
- DBMS가 데이터를 유지하기 위해 사용하는 메모리는 크게 `데이터 캐시`, `로그 버퍼`가 있다.

### 데이터 캐시
- 데이터 캐시는 디스크에 있는 **데이터의 일부를 메모리에 유지하기 위해** 사용하는 메모리 영역이다.
- SELECT 구문에서 선택할 데이터가 **모두 데이터 캐시에 있다면** 디스크에 접근하지 않고 처리가 수행되어 굉장히 빠르게 응답한다.

### 로그 버퍼
- 로그 버퍼는 **갱신 처리**(`INSERT`, `DELETE`, `UPDATE`, `MERGE`)에 관련이 있다.
- DBMS는 갱신 SQL 구문을 받으면, 저장소에 있는 데이터를 **곧바로 변경하지 않고 먼저 로그 버퍼** 위에 변경 정보를 보낸 이후 디스크에 변경을 수행한다.
    - 갱신 처리는 SQL 구문의 실행 시점과 저장소에 갱신하는 시점에 차이가 있는 **비동기 처리**이다.

