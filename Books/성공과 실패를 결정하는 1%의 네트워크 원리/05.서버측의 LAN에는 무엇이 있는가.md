# 서버측의 LAN에는 무엇이 있는가?
## 웹 서버의 설치 장소
- 클라이언트 PC는 가정 또는 회사에 설치되어 있지만, 서버는 가정이나 회사 안에만 있는 것은 아니다. 그렇다면 서버는 어디에 있는 것일까? 서버의 설치 장소에 대해 알아보자. 

### 사내에 웹 서버를 설치하는 경우
- 인터넷부터 서버에 도착하기까지의 여정은 서버가 설치된 장소에 따라 다르다.
- 가장 간단한 방법은 사내 LAN에 서버를 설치하고, 인터넷에서 직접 액세스하는 것이다.
- 예전에는 이러한 형태로 서버를 설치하는 경우가 많았지만, 현재는 주류에서 밀려나게 됐다.
  - 사내 LAN에 설치한 기기에는 서버뿐만 아니라 클라이언트에도 글로벌 주소를 할당해야 하는데 **글로벌 주소의 여유가 부족**하다.
  - 보안에 취약하다.
- 특정 애플리케이션에 액세스하는 패킷만 통과시키고, 그 외 패킷을 차단하는 문지기 역할인 **방화벽**을 두는 방법이 일반적이다.
  - 액세스를 허가한 애플리케이션에 보안 구멍이 있을 수 있어서 완벽하지는 않지만, 그래도 방화벽을 두어 보안적인 위험성을 크게 낮출 수 있다.

### 데이터센터에 웹 서버를 설치하는 경우
- 인터넷 중심에 고속 회선으로 접속되어 있기에 고속으로 접근이 가능하다.
- 상시 관리되는 장소이며 부가적인 모니터링 등 서비스를 제공받을 수 있어 **안정성** 또한 회사에 비해 높은 편이다.

## 방화벽의 원리와 동작
- 웹 서버 앞에는 보통 방화벽이 있는데, 방화벽이 어떻게 웹 서버를 지키는지 살펴보자.

### 패킷 필터링형이 주류이다
- 네트워크에는 다양한 패킷이 무수히 흐르고 있기에 방화벽이 이 중에 통과, 차단할 패킷을 선별하는 것은 간단한 일이 아니기에 다양한 방법이 존재한다.
  - 방화벽의 유형에는 **패킷 필터링형**, **애플리케이션 게이트웨이형**, **서킷 게이트웨이형**이 있다.
- 모두 방화벽 목적을 수행할 수 있지만, 성능, 가격, 사용 편의성 등의 이유로 현재는 **패킷 필터링형**이 가장 널리 보급되었다.

### 패킷 필터링형 방화벽
- 패킷 필터링형 방화벽은 수신처와 송신처의 IP 주소, 수신처와 송신처 포트 번호, 컨트롤 비트 등으로 패킷을 통과시킬지 판단한다.

### 방화벽을 통과한다
- 방화벽에는 여러 가지의 조건들이 설정되어 있다.
- 방화벽에 패킷이 도착하면 조건에 해당하는지 판정하고, 통과시킬지 차단시킬지를 결정한다.
- 차단하는 대상의 패킷은 버리고, 부정 침입의 흔적 등 분석 용도로 사용을 위해 버린 기록을 남긴다.
- 통과하는 대상의 패킷을 라우터와 같은 동작으로 패킷을 중계한다.
