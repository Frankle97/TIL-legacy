# TCP/IP의 데이터를 전기 신호로 만들어 보낸다
## 프로토콜 스택의 내부 구성
![img.png](images/02_protocol_stack_instructure.png)
- 위부터 아래로 데이터 송수신의 일을 의뢰한다.
- 가장 위에 네트워크 어플리케이션이 위치해있고 브라우저, 웹 서버, 메일 서버 등이 여기에 해당된다. 
  - 어플리케이션의 아랫부분에는 Socket 라이브러리가 있으며, 이 안에 리졸버가 내장되어 있다.
- OS의 내부에 프로토콜 스택이 있고, TCP/UDP 프로토콜을 사용해 데이터 송수신을 담당하는 부분이 있고, 이 둘이 의뢰를 받아 송수신 동작을 실행한다.
  - TCP: 브라우저나 메일 등에서 사용
  - UDP: DNS 서버 조회 등 짧은 제어용 데이터 송수신의 경우 사용
- IP 프로토콜: 패킷 송수신 동작을 제어
  - 인터넷에서 데이터를 운반할 때는 데이터를 작게 나누어 **패킷** 형태로 운반한다.
  - 이 패킷을 통신 상대까지 운반하는 것이 IP의 주 역할.
  - IP에는 ICMP, ARP 프로토콜을 다루는 부분이 포함됨
    - ICMP: 패킷 운반 중 **발생 오류나 제어용 메시지를 통지**할 때 사용
    - ARP: IP 주소에 대응하는 이더넷의 **MAC 주소**를 조사할 때 사용
- LAN 드라이버: LAN 어댑터의 하드웨어를 제어

## 소켓의 실체는 통신 제어용 제어 정보
- 프로토콜 스택 내부에는 통신 상대 IP 주소, 포트 번호, 통신 동작 상태 등을 **기록하는 메모리 영역을 갖고 있다.**
- 본래 소켓은 실체가 없는 개념적인 것이므로, 이 메모리가 즉 소켓의 실체라고 생각해도 무관하다.
- 프로토콜 스택은 **소켓에 기록된 제어 정보를 참조**하며 수행된다. 

## Socket을 호출했을 때의 동작
- 어플리케이션이 socket을 호출하여 소켓 생성을 의뢰하면, 프로토콜 스택은 한 개의 소켓을 만든다.
- 프로토콜 스택은 소켓 한 개 분량의 메모리 영역을 확보하고 초기 상태라는 것을 기록한다.
- 소켓을 만들면 해당 소켓을 가르키는 **디스크립터**를 어플리케이션에게 알려주며, 디스크립터는 프로토콜 스택 내부의 많은 소켓 중 본인의 소켓 정보를 찾을 수 있는 번호표 같은 정보이다.
